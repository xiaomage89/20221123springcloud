var page=require("webpage").create(),system=require("system");var objIndex=0;var m=Math.floor(Math.random()*1000000);var address=system.args[1].split("'")[1];var size=system.args[2].split("*");var output=system.args[3];var pageWidth=parseInt(size[0],10);var pageHeight=parseInt(size[1],10);var screenshotObjs=system.args[4].split(",");var isFirstPage=system.args[5];var restype=system.args[6];var renderTime=parseInt(system.args[7],10);var zoom=!!system.args[8]?system.args[8]:"true";var format=system.args[9]?system.args[9]:"pdf";var currentId=screenshotObjs[objIndex++];var maxCliptWidth=25000;var maxCliptWidth=25000;var needInitPage=["false"];var page_Index=0;page.viewportSize={width:pageWidth+5,height:pageHeight+5};page.clipRect={top:9,left:0,width:(pageWidth+5)>maxCliptWidth?maxCliptWidth:(pageWidth+5),height:pageHeight>maxCliptWidth?maxCliptWidth:pageHeight};try{phantom.injectJs(restype.toLowerCase()+"_screenshot.js");}catch(e){console.log(e);}page.onAlert=function(a){doScreenshot();console.log(a);phantom.exit();};page.open(address,function(a){if(a!=="success"){console.log("Unable to load the address!");doScreenshot();phantom.exit(1);}else{var b=window.setTimeout(function(){if(window["beforeGetbounds"]&&typeof(window["beforeGetbounds"])=="function"){page.evaluate(window["beforeGetbounds"]);}if(screenshotObjs[0]=="null"){page.render(output+m+++".png");phantom.exit();}else{getBounds();}clearTimeout(b);},renderTime);}});function getBounds(){if(restype!="other"){page.evaluate(window["getBounds_"+restype.toUpperCase()],currentId,zoom,format);}else{page.render(output+m+++".png");phantom.exit();}}page.onCallback=function(){var a=Array.prototype.slice.call(arguments);var b=a.shift();if(a.length>0){window[b].apply(null,a);}else{window[b]();}};function setBounds(a){page.clipRect={top:parseInt(a[0],10),left:parseInt(a[1],10),width:parseInt(a[2],10)>maxCliptWidth?maxCliptWidth:parseInt(a[2],10),height:parseInt(a[3],10)>maxCliptWidth?maxCliptWidth:parseInt(a[3],10)};}function doScreenshot(){page.render(output+"/"+m+++"_"+currentId+".png");}function evaluate(){var a=Array.prototype.slice.call(arguments);var b=a.shift();if(a.length>0){page.evaluate(window[b],a);}else{page.evaluate(window[b]);}}function exit(a){phantom.exit(typeof a!="number"?0:a);}