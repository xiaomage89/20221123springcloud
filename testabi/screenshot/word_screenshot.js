function beforeGetbounds(){try{var c=document.body.clientWidth;var a=document.body.clientHeight;window.callPhantom("resizeWindow",c,a);}catch(b){alert(b);}}function resizeWindow(){try{var b=arguments[0];var a=arguments[1];page.viewportSize={width:parseInt(b),height:parseInt(a)};page.clipRect={top:9,left:0,width:(parseInt(b)+5)>10000?10000:(parseInt(b)+5),height:parseInt(a)>10000?10000:parseInt(a)};}catch(c){alert(c);}}function getBounds_WORD(){try{var b=arguments[0].toString();var f=window.document.getElementById(b);if(!f){alert("currentId错误");}var i=f.getBoundingClientRect().top+1;var h=f.getBoundingClientRect().left+1;var c=f.offsetWidth-1;var a=f.offsetHeight-1;bounds=[i,h,c,a];var d=window.document.getElementsByClassName("screenshotuseposition");if(d.length>0){window.callPhantom("initPageIndex",bounds.toString());}else{window.callPhantom("getBounds_CallBack",bounds.toString());}}catch(g){console.log(g);alert(g);}}function initPageIndex(){try{var b=arguments[0];if(b!=null){boundsArr=b.toString().split(",");var a=boundsArr[0];if(page_Index==0){page_Index=Number(a)+95;}}evaluate("findWhetherShot",page_Index.toString());}catch(c){console.log(c);phantom.exit();}}function findWhetherShot(){try{var f=Number(arguments[0]);f=f+960;var g=960;var m=window.document.getElementsByClassName("screenshotuseposition");if(m.length>0){for(var h=0;h<m.length;h++){var k=m[h].offsetParent.offsetTop;var c=Number(k)+36;var n=m[h].offsetParent.offsetHeight+1;if(f>c&&f<Number(c)+Number(n)){g=960-(f-c);f=c;break;}}}var a=window.document.getElementById("page");var l=a.getBoundingClientRect().top+1;var d=a.getBoundingClientRect().left+1;var b=a.offsetWidth-1;var o=a.offsetHeight-1;bounds=[l,d,b,o];window.callPhantom("getBounds_CallBack2",bounds.toString(),f.toString(),g.toString());}catch(j){console.log(j);alert(j);}}function getBounds_CallBack2(){try{var a=arguments[0];var m=Number(arguments[1]);var d=Number(arguments[2]);var p;var c=false;if(a!=null){boundsArr=a.toString().split(",");if(boundsArr.length>=4){var h=boundsArr[0];var b=boundsArr[1];var f=boundsArr[2];var o=Number(boundsArr[3]);var g=page_Index;var l=b;var n=755;var i=d;c=true;if(g+i>o-50){i=o-g-50;if(page_Index>o){c=false;}}if(i<=0){c=false;}p=[g,l,n,i];}}if(c){evaluate("setPageBounds2",p.toString());var k=setTimeout(function(){doScreenshot();page_Index=m;evaluate("getBounds_WORD",currentId);clearTimeout(k);},2000);}else{phantom.exit();}}catch(j){console.log(j);phantom.exit();}}function setPageBounds2(){try{var a=arguments[0];if(a!=null){a=a.toString().split(",");window.callPhantom("setBounds",a);}}catch(b){console.log(b);alert(b);}}function getBounds_CallBack(){try{var a=arguments[0];var d=arguments[1];var g=0;var l;var m=0;if(a!=null){boundsArr=a.toString().split(",");if(boundsArr.length>=4){var h=boundsArr[0];var b=boundsArr[1];var f=boundsArr[2];var k=boundsArr[3];g=(k-h)/960;var c=Number(h)+960*page_Index+95;m=Number(k)-c;l=[c,b,f,k];}}if(page_Index<g&&m>50){evaluate("setPageBounds",l.toString());var j=setTimeout(function(){doScreenshot();page_Index++;evaluate("getBounds_WORD",currentId);clearTimeout(j);},2000);}else{phantom.exit();}}catch(i){console.log(i);phantom.exit();}}function setPageBounds(){try{var d=arguments[0];if(d!=null){d=d.toString().split(",");if(d.length>=4){var c=d[0];var h=d[1];var b=755;var a=d[3];if(Number(a)-c>960){a=960;}else{a=Number(a)-c-50;}var g=[c,h,b,a];window.callPhantom("setBounds",g);}}}catch(f){console.log(f);alert(f);}}